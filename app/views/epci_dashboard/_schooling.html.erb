<!-- app/views/epci_dashboard/_schooling.html.erb -->
<div class="bg-white shadow rounded-lg p-6 mb-6">
  <h2 class="text-lg font-medium text-gray-900 mb-4">Scolarisation</h2>

  <!-- Statistiques g√©n√©rales sur la scolarisation -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="bg-amber-50 p-4 rounded-lg">
      <h3 class="text-sm font-medium text-amber-800 mb-1">Scolarisation des enfants de 2 ans</h3>
      <p class="text-2xl font-bold text-amber-900">
        <%= number_to_percentage(@epci_schooling_communes_data["average_schooling_rate_2y"] || 0, precision: 1) %>
      </p>
      <p class="text-sm text-amber-600">
        Moyenne sur l'EPCI
      </p>
    </div>
    <div class="bg-green-50 p-4 rounded-lg">
      <h3 class="text-sm font-medium text-green-800 mb-1">Scolarisation des enfants de 3 √† 5 ans</h3>
      <p class="text-2xl font-bold text-green-900">
        <%= number_to_percentage(@epci_schooling_communes_data["average_schooling_rate_3_5y"] || 0, precision: 1) %>
      </p>
      <p class="text-sm text-green-600">
        Moyenne sur l'EPCI
      </p>
    </div>
    <div class="bg-indigo-50 p-4 rounded-lg">
      <h3 class="text-sm font-medium text-indigo-800 mb-1">Enfants concern√©s</h3>
      <p class="text-2xl font-bold text-indigo-900">
        <%
          total_2y = @epci_schooling_communes_data["communes"].sum { |c| c["total_children_2y"].to_f }.round
          total_3_5y = @epci_schooling_communes_data["communes"].sum { |c| c["total_children_3_5y"].to_f }.round
          total = total_2y + total_3_5y
        %>
        <%= number_with_delimiter(total) %>
      </p>
      <p class="text-sm text-indigo-600">
        Enfants de 2 √† 5 ans sur le territoire
      </p>
    </div>
  </div>

  <!-- Carte de scolarisation des enfants de 2 ans -->
  <h3 class="text-md font-medium text-gray-800 mb-4">Taux de scolarisation des enfants de 2 ans</h3>

  <!-- Tableau de comparaison des taux de scolarisation √† 2 ans -->
  <div class="mb-6">
    <h3 class="text-md font-medium text-gray-800 mb-4">Comparaison des taux de scolarisation des enfants de 2 ans</h3>

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              √âchelon territorial
            </th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Taux de scolarisation √† 2 ans
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <!-- Ligne pour l'EPCI -->
          <tr>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">
              <%= display_territory_name(epci_display_name) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
              <div class="flex items-center">
                <% epci_rate = @epci_schooling_communes_data["average_schooling_rate_2y"] %>
                <span class="<%= epci_rate && epci_rate > 0 ? "font-semibold" : "" %>">
                  <%= number_to_percentage(epci_rate, precision: 1) %>
                </span>
                <% if epci_rate && epci_rate > 0 %>
                  <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                    <div class="bg-amber-600 h-2 rounded-full" style="width: <%= [epci_rate * 100 / 50, 100].min %>%"></div>
                  </div>
                <% end %>
              </div>
            </td>
          </tr>

          <!-- Ligne pour le d√©partement -->
          <% if @department_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <%= department_display_name %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @department_schooling_data&.dig("data")&.keys&.sort&.last
                    dept_rate = latest_year ? @department_schooling_data&.dig("data", latest_year, "schooling_rate_2y") : nil
                  %>
                  <span class="<%= dept_rate && dept_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(dept_rate, precision: 1) %>
                  </span>
                  <% if dept_rate && dept_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: <%= [dept_rate * 100 / 50, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>

          <!-- Ligne pour la r√©gion -->
          <% if @region_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <%= region_display_name %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @region_schooling_data&.dig("data")&.keys&.sort&.last
                    region_rate = latest_year ? @region_schooling_data&.dig("data", latest_year, "schooling_rate_2y") : nil
                  %>
                  <span class="<%= region_rate && region_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(region_rate, precision: 1) %>
                  </span>
                  <% if region_rate && region_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-green-600 h-2 rounded-full" style="width: <%= [region_rate * 100 / 50, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>

          <!-- Ligne pour la France -->
          <% if @france_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">
                France
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @france_schooling_data&.dig("data")&.keys&.sort&.last
                    france_rate = latest_year ? @france_schooling_data&.dig("data", latest_year, "schooling_rate_2y") : nil
                  %>
                  <span class="<%= france_rate && france_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(france_rate, precision: 1) %>
                  </span>
                  <% if france_rate && france_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-red-600 h-2 rounded-full" style="width: <%= [france_rate * 100 / 50, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="mt-2 text-xs text-gray-500">
      <p>Note: Les barres de progression sont calibr√©es pour un maximum de 50%.</p>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <!-- Carte des taux de scolarisation √† 2 ans -->
    <div>
      <h4 class="text-sm font-medium text-gray-700 mb-2">Carte par commune (<%= @epci_schooling_communes_data["year"] %>)</h4>
      <div id="communes-map-schooling-2y" class="h-[500px] w-full border border-gray-200 rounded-md"></div>
      <div id="schooling-2y-legend" class="mt-3"></div>
    </div>

    <!-- Tableau des communes avec taux extr√™mes -->
    <div>
      <h4 class="text-sm font-medium text-gray-700 mb-2">Communes avec les taux extr√™mes</h4>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Commune</th>
              <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Taux</th>
              <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Enfants scolaris√©s</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <%
              # Communes avec les taux les plus √©lev√©s
              top_communes = @epci_schooling_communes_data["communes"]
                              .select { |c| c["total_children_2y"].to_f >= 5 } # Filtre pour √©viter les communes avec trop peu d'enfants
                              .sort_by { |c| -c["schooling_rate_2y"].to_f }
                              .first(3)

              # Communes avec les taux les plus bas
              bottom_communes = @epci_schooling_communes_data["communes"]
                              .select { |c| c["total_children_2y"].to_f >= 5 } # Filtre pour √©viter les communes avec trop peu d'enfants
                              .sort_by { |c| c["schooling_rate_2y"].to_f }
                              .first(3)
            %>

            <!-- Ent√™te pour les communes avec les taux les plus √©lev√©s -->
            <tr>
              <td colspan="3" class="px-3 py-2 text-sm font-medium text-gray-900 bg-gray-100">Taux les plus √©lev√©s</td>
            </tr>

            <% top_communes.each do |commune| %>
              <tr>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900"><%= commune["name"] %></td>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900 font-medium text-green-600">
                  <%= number_to_percentage(commune["schooling_rate_2y"], precision: 1) %>
                </td>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">
                  <%= commune["schooled_children_2y"].round(1) %> / <%= commune["total_children_2y"].round(1) %>
                </td>
              </tr>
            <% end %>

            <!-- Ent√™te pour les communes avec les taux les plus bas -->
            <tr>
              <td colspan="3" class="px-3 py-2 text-sm font-medium text-gray-900 bg-gray-100">Taux les plus bas</td>
            </tr>

            <% bottom_communes.each do |commune| %>
              <tr>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900"><%= commune["name"] %></td>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900 font-medium text-red-600">
                  <%= number_to_percentage(commune["schooling_rate_2y"], precision: 1) %>
                </td>
                <td class="px-3 py-2 whitespace-nowrap text-sm text-gray-900">
                  <%= commune["schooled_children_2y"].round(1) %> / <%= commune["total_children_2y"].round(1) %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Bloc contextuel : Scolarisation des enfants de 2 ans -->
  <div class="mt-6 bg-gradient-to-r from-emerald-50 to-green-50 border-l-4 border-emerald-500 rounded-lg p-6 shadow-sm">
    <div class="flex items-start space-x-4">
      <!-- Ic√¥ne -->
      <div class="flex-shrink-0">
        <div class="p-3 bg-emerald-100 rounded-lg">
          <svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
          </svg>
        </div>
      </div>

      <!-- Contenu -->
      <div class="flex-1">
        <h4 class="text-lg font-semibold text-gray-900 mb-3">
          üéì Lecture du tableau ‚Äì Scolarisation des enfants de moins de 3 ans
        </h4>

        <div class="space-y-3 text-sm text-gray-700 leading-relaxed">
          <p class="font-medium text-gray-800">
            <span class="bg-emerald-100 px-2 py-1 rounded">Une scolarisation pr√©coce en recul mais strat√©gique</span>
          </p>

          <p>
            La scolarisation √† deux ans reste <strong>marginale √† l'√©chelle nationale</strong> ‚Äì environ
            <span class="font-semibold text-emerald-700">16 % des enfants de 2 ans aujourd'hui</span>, contre 35 % √† la fin des ann√©es 1990 ‚Äì
            mais elle demeure un <strong>levier √©ducatif et social essentiel</strong> dans certains territoires (DEPP, DREES, 2024).
            Conform√©ment au Code de l'√©ducation, elle est prioritairement d√©velopp√©e dans les zones d'√©ducation prioritaire et les territoires fragiles,
            urbains comme ruraux.
          </p>

          <div class="bg-white border border-emerald-200 rounded-lg p-4">
            <p class="font-medium text-gray-900 mb-2">üó∫Ô∏è Des disparit√©s territoriales marqu√©es</p>
            <p class="text-gray-700 mb-2">
              Les donn√©es montrent d'importantes disparit√©s : la scolarisation pr√©coce est beaucoup plus fr√©quente dans
              <strong>l'Ouest et le Nord de la France</strong> que dans les grandes m√©tropoles, notamment en √éle-de-France (DEPP, 2022).
            </p>
            <p class="text-gray-700">
              Les travaux r√©cents de la cohorte ELFE (FSU-SNUipp, 2024) soulignent les <strong>b√©n√©fices √©ducatifs mesurables</strong>
              d'une entr√©e √† l'√©cole d√®s 2 ans : progr√®s en motricit√© fine
              <span class="font-semibold text-emerald-700">(+23 %)</span>, en langage
              <span class="font-semibold text-emerald-700">(+9 %)</span> et en autonomie
              <span class="font-semibold text-emerald-700">(+6 %)</span>, particuli√®rement marqu√©s chez les enfants de milieux modestes.
            </p>
          </div>

          <div class="bg-green-50 border border-green-300 rounded-lg p-4">
            <p class="font-medium text-gray-900 mb-2">üéØ Un outil d'√©galit√© des chances</p>
            <p class="text-gray-700">
              La scolarisation pr√©coce agit comme un <strong>facteur d'√©galit√© des chances</strong> en compensant une partie des √©carts
              de d√©veloppement li√©s au contexte familial. Dans un contexte de baisse du nombre d'enfants de moins de 3 ans (INSEE, 2025),
              elle peut constituer un <strong>outil d'√©quilibre territorial</strong> : elle soutient les familles modestes sans solution de garde,
              pr√©pare l'entr√©e √† la maternelle et participe √† la coh√©rence d'une politique globale de la petite enfance.
            </p>
          </div>

          <p class="italic text-gray-600 border-l-2 border-emerald-300 pl-3 mt-4">
            Pour les politiques locales, l'enjeu n'est pas d'√©tendre massivement la scolarisation des 2 ans, mais de
            <strong>la cibler l√† o√π elle a le plus d'impact</strong>, en compl√©ment de l'offre d'accueil existante
            (cr√®ches, assistants maternels).
          </p>

          <div class="mt-4 pt-3 border-t border-gray-200">
            <p class="text-xs text-gray-500">
              <strong>Sources :</strong> DEPP, <em>La scolarisation des enfants de deux ans</em>, 2022 ‚Ä¢
              DREES, <em>Les enfants scolaris√©s √† deux ans vont √† l'√©cole surtout le matin</em>, √âtudes & R√©sultats, 2022 ‚Ä¢
              FSU-SNUipp, <em>L'√©cole √† deux ans, facteur de d√©veloppement</em>, n¬∞498, juin 2024 ‚Ä¢
              INSEE, <em>Bilan d√©mographique 2024</em>, 2025
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Carte de scolarisation des enfants de 3 √† 5 ans -->
  <h3 class="text-md font-medium text-gray-800 mb-4 mt-8">Taux de scolarisation des enfants de 3 √† 5 ans</h3>

  <!-- Tableau de comparaison des taux de scolarisation de 3 √† 5 ans -->
  <div class="mb-6">
    <h4 class="text-sm font-medium text-gray-700 mb-2">Comparaison territoriale des taux de scolarisation des enfants de 3 √† 5 ans</h4>

    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              √âchelon territorial
            </th>
            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Taux de scolarisation de 3 √† 5 ans
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <!-- Ligne pour l'EPCI -->
          <tr>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">
              <%= display_territory_name(epci_display_name) %>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
              <div class="flex items-center">
                <% epci_rate = @epci_schooling_communes_data["average_schooling_rate_3_5y"] %>
                <span class="<%= epci_rate && epci_rate > 0 ? "font-semibold" : "" %>">
                  <%= number_to_percentage(epci_rate, precision: 1) %>
                </span>
                <% if epci_rate && epci_rate > 0 %>
                  <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                    <div class="bg-green-600 h-2 rounded-full" style="width: <%= [epci_rate * 100 / 100, 100].min %>%"></div>
                  </div>
                <% end %>
              </div>
            </td>
          </tr>

          <!-- Ligne pour le d√©partement -->
          <% if @department_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <%= department_display_name %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @department_schooling_data&.dig("data")&.keys&.sort&.last
                    dept_rate = latest_year ? @department_schooling_data&.dig("data", latest_year, "schooling_rate_3_5y") : nil
                  %>
                  <span class="<%= dept_rate && dept_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(dept_rate, precision: 1) %>
                  </span>
                  <% if dept_rate && dept_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-blue-600 h-2 rounded-full" style="width: <%= [dept_rate * 100 / 100, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>

          <!-- Ligne pour la r√©gion -->
          <% if @region_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <%= region_display_name %>
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @region_schooling_data&.dig("data")&.keys&.sort&.last
                    region_rate = latest_year ? @region_schooling_data&.dig("data", latest_year, "schooling_rate_3_5y") : nil
                  %>
                  <span class="<%= region_rate && region_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(region_rate, precision: 1) %>
                  </span>
                  <% if region_rate && region_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-purple-600 h-2 rounded-full" style="width: <%= [region_rate * 100 / 100, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>

          <!-- Ligne pour la France -->
          <% if @france_schooling_data.present? %>
            <tr>
              <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900">
                France
              </td>
              <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">
                <div class="flex items-center">
                  <%
                    # R√©cup√©rer l'ann√©e la plus r√©cente
                    latest_year = @france_schooling_data&.dig("data")&.keys&.sort&.last
                    france_rate = latest_year ? @france_schooling_data&.dig("data", latest_year, "schooling_rate_3_5y") : nil
                  %>
                  <span class="<%= france_rate && france_rate > 0 ? "font-semibold" : "" %>">
                    <%= number_to_percentage(france_rate, precision: 1) %>
                  </span>
                  <% if france_rate && france_rate > 0 %>
                    <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                      <div class="bg-red-600 h-2 rounded-full" style="width: <%= [france_rate * 100 / 100, 100].min %>%"></div>
                    </div>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="mt-2 text-xs text-gray-500">
      <p>Note: Les taux de scolarisation pour les enfants de 3 √† 5 ans √©tant g√©n√©ralement √©lev√©s, les barres de progression sont calibr√©es sur 100%.</p>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Carte des taux de scolarisation de 3 √† 5 ans -->
    <div>
      <h4 class="text-sm font-medium text-gray-700 mb-2">Carte par commune (<%= @epci_schooling_communes_data["year"] %>)</h4>
      <div id="communes-map-schooling-3-5y" class="h-[500px] w-full border border-gray-200 rounded-md"></div>
      <div id="schooling-3-5y-legend" class="mt-3"></div>
    </div>

    <!-- Visualisation des effectifs -->
    <div>
      <h4 class="text-sm font-medium text-gray-700 mb-2">R√©partition des effectifs</h4>
      <div class="bg-gray-50 p-4 rounded-md h-full">
        <p class="text-sm text-gray-600 mb-4">
          Les enfants de 3 √† 5 ans sont g√©n√©ralement scolaris√©s √† un taux √©lev√© en France. Voici la r√©partition sur le territoire :
        </p>

        <div class="space-y-4">
          <div>
            <p class="text-sm font-medium text-gray-700 mb-1">Enfants de 3 √† 5 ans total</p>
            <p class="text-xl font-bold text-indigo-600">
              <%= number_with_delimiter(total_3_5y) %>
            </p>
          </div>

          <div>
            <p class="text-sm font-medium text-gray-700 mb-1">Enfants de 3 √† 5 ans scolaris√©s</p>
            <%
              total_schooled_3_5y = @epci_schooling_communes_data["communes"].sum { |c| c["schooled_children_3_5y"].to_f }.round
            %>
            <p class="text-xl font-bold text-green-600">
              <%= number_with_delimiter(total_schooled_3_5y) %>
            </p>
          </div>

          <div>
            <p class="text-sm font-medium text-gray-700 mb-1">Taux global de scolarisation 3-5 ans</p>
            <%
              global_rate_3_5y = total_schooled_3_5y.to_f / total_3_5y * 100 if total_3_5y > 0
            %>
            <p class="text-xl font-bold text-blue-600">
              <%= number_to_percentage(global_rate_3_5y || 0, precision: 1) %>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bo√Æte d'information explicative -->
  <div class="mt-6 bg-gray-50 p-4 rounded-md">
    <h4 class="text-sm font-medium text-gray-700 mb-2">√Ä propos de la scolarisation</h4>
    <p class="text-sm text-gray-600">
      Les enfants de 2 ans peuvent √™tre scolaris√©s en maternelle sous certaines conditions et selon les places disponibles.
      Les taux de scolarisation √† 2 ans varient fortement d'une commune √† l'autre et refl√®tent souvent les priorit√©s √©ducatives locales.
      En revanche, la scolarisation des enfants de 3 √† 5 ans est obligatoire depuis la loi "Pour une √âcole de la confiance" de 2019.
      Ces donn√©es permettent d'identifier les zones o√π des efforts particuliers pourraient √™tre n√©cessaires pour am√©liorer l'acc√®s pr√©coce √† l'√©ducation.
    </p>
  </div>
</div>

<!-- Donn√©es JSON pour les cartes -->
<script type="application/json" id="communes-schooling-geojson">
  <%= raw(@communes_schooling_geojson) %>
</script>
